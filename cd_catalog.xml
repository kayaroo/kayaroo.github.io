<!DOCTYPE html>
<html lang="en-US">
<head>
  <title>Homework 8</title>
  <style>
  body{background:#faebd7;}
  </style>
</head>
<body>
  <h1>Homework 8</h1>
  <CD>
  <TITLE>Your CD Title</TITLE>
  <ARTIST>Your Name</ARTIST>
  <COUNTRY>Your Country</COUNTRY>
  <COMPANY>Your Company</COMPANY>
  <PRICE>Your Price</PRICE>
  <YEAR>2024</YEAR>
</CD>

<script>
  function loadXMLData() {
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
      if (this.readyState == 4 && this.status == 200) {
        var xmlDoc = this.responseXML;
        var table = "<table border='1'><tr><th>Title</th><th>Artist</th><th>Country</th><th>Company</th><th>Price</th><th>Year</th></tr>";
        
        var cds = xmlDoc.getElementsByTagName("CD");
        for (var i = 0; i < cds.length; i++) {
          table += "<tr>";
          table += "<td>" + cds[i].getElementsByTagName("TITLE")[0].childNodes[0].nodeValue + "</td>";
          table += "<td>" + cds[i].getElementsByTagName("ARTIST")[0].childNodes[0].nodeValue + "</td>";
          table += "<td>" + cds[i].getElementsByTagName("COUNTRY")[0].childNodes[0].nodeValue + "</td>";
          table += "<td>" + cds[i].getElementsByTagName("COMPANY")[0].childNodes[0].nodeValue + "</td>";
          table += "<td>" + cds[i].getElementsByTagName("PRICE")[0].childNodes[0].nodeValue + "</td>";
          table += "<td>" + cds[i].getElementsByTagName("YEAR")[0].childNodes[0].nodeValue + "</td>";
          table += "</tr>";
        }
        table += "</table>";
        document.getElementById("cdTable").innerHTML = table;
      }
    };
    xhttp.open("GET", "catalog.xml", true); // Ensure your XML file name is correct
    xhttp.send();
  }
</script>

<body onload="loadXMLData()">
  <h1>Homework 8 - AJAX Application</h1>

  <div id="cdTable"></div>
</body>

<h2>Explanation of AJAX</h2>
<p>
  The AJAX code in the script is used to load and display the data from the XML file dynamically. When the page is loaded, the `loadXMLData()` function is triggered. This function sends an HTTP request to fetch the XML file (in this case, "catalog.xml"). Once the XML data is retrieved successfully, the function processes the XML and converts it into an HTML table. The table contains all the CD information, including the new CD entry with your name and the current year.
</p>
<p>
  The AJAX call uses the `XMLHttpRequest` object to communicate with the server without reloading the page. This makes the application more dynamic and user-friendly.
</p>

<h2>REST API</h2>

<form>
    <a href="https://kayaroo.github.io/hw8EXC.html">Extra Credit</a>
</form>
<form>
    <a href="https://kayaroo.github.io/">Main Menu</a>
</form>
</body>
</html>